

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/blog/img/fluid.png">
  <link rel="icon" href="/blog/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="WZQ&#39;02">
  <meta name="keywords" content="">
  
    <meta name="description" content="2021:*文章写的有点早了，内容可能不适用于现在，请读者留意。*原文章是有配图的，因现今留存的图片资料不全，所以部分图片不会在此显示。*进军科技区的第一次尝试，可我暂且不打算继续下去了。当初我还是没有明确自己的定位，写了这种野鸡技术文章。其实我还是希望有对这方面更了解的人能整理一下 B 站（乃至其他视频网站）技术的发展史的。其实这也算是反映网站发展方向的一个方式。*之前还出过视频版，但因为做的很">
<meta property="og:type" content="article">
<meta property="og:title" content="【wzqtechtips#01】B 站对你的视频做了什么？纵观 B 站视频串流技术发展史">
<meta property="og:url" content="http://wzq02.github.io/blog/200819_wtt01/index.html">
<meta property="og:site_name" content="WZQ&#39;02&#39;s Blog">
<meta property="og:description" content="2021:*文章写的有点早了，内容可能不适用于现在，请读者留意。*原文章是有配图的，因现今留存的图片资料不全，所以部分图片不会在此显示。*进军科技区的第一次尝试，可我暂且不打算继续下去了。当初我还是没有明确自己的定位，写了这种野鸡技术文章。其实我还是希望有对这方面更了解的人能整理一下 B 站（乃至其他视频网站）技术的发展史的。其实这也算是反映网站发展方向的一个方式。*之前还出过视频版，但因为做的很">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://wzq02.cf/images/for_hexo/bilibili_crush_videos.png">
<meta property="og:image" content="https://wzq02.cf/images/for_hexo/iPhone_storage_full.jpg">
<meta property="og:image" content="https://wzq02.cf/images/for_hexo/draw3.png">
<meta property="og:image" content="https://wzq02.cf/images/for_hexo/draw5.png">
<meta property="og:image" content="https://wzq02.cf/images/for_hexo/draw8.7.png">
<meta property="og:image" content="https://wzq02.cf/images/for_hexo/draw8.8.png">
<meta property="og:image" content="https://wzq02.cf/images/for_hexo/draw9.png">
<meta property="og:image" content="https://wzq02.cf/images/for_hexo/draw10.png">
<meta property="og:image" content="https://wzq02.cf/images/for_hexo/draw11.png">
<meta property="article:published_time" content="2020-08-19T10:00:00.000Z">
<meta property="article:modified_time" content="2022-07-10T02:59:57.013Z">
<meta property="article:author" content="WZQ&#39;02">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://wzq02.cf/images/for_hexo/bilibili_crush_videos.png">
  
  
  
  <title>【wzqtechtips#01】B 站对你的视频做了什么？纵观 B 站视频串流技术发展史 - WZQ&#39;02&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/blog/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/blog/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/blog/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"wzq02.github.io","root":"/blog/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/blog/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/blog/js/utils.js" ></script>
  <script  src="/blog/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/blog/">
      <strong>WZQ&#39;02&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/blog/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/blog/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/blog/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/blog/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/blog/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/blog/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="【wzqtechtips#01】B 站对你的视频做了什么？纵观 B 站视频串流技术发展史"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2020-08-19 18:00" pubdate>
          2020年8月19日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          6.2k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          52 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">【wzqtechtips#01】B 站对你的视频做了什么？纵观 B 站视频串流技术发展史</h1>
            
            
              <div class="markdown-body">
                
                <p>2021:<br>*文章写的有点早了，内容可能不适用于现在，请读者留意。<br>*原文章是有配图的，因现今留存的图片资料不全，所以部分图片不会在此显示。<br>*进军科技区的第一次尝试，可我暂且不打算继续下去了。当初我还是没有明确自己的定位，写了这种野鸡技术文章。其实我还是希望有对这方面更了解的人能整理一下 B 站（乃至其他视频网站）技术的发展史的。其实这也算是反映网站发展方向的一个方式。<br>*之前还出过视频版，但因为做的很粗糙所以删了。<br>*以下为正文。</p>
<p><img src="https://wzq02.cf/images/for_hexo/bilibili_crush_videos.png" srcset="/blog/img/loading.gif" lazyload alt="bilibili compressing videos"></p>
<h3 id="1-为什么视频网站能把视频压缩的更小？"><a href="#1-为什么视频网站能把视频压缩的更小？" class="headerlink" title="1.为什么视频网站能把视频压缩的更小？"></a>1.为什么视频网站能把视频压缩的更小？</h3><p>不知道各位最近有没有用手机&#x2F;摄像机拍摄过视频。你们或许会发现，你随手录个视频，就会占掉你手机&#x2F;摄像机存储几个 GB 的空间。对于一部存储容量 32GB 的手机而言（我比较穷酸，手机存储容量不是很大），如果是录制 4K 视频，总共也只能录制一个多小时，然后你手机存储就给你用完了。</p>
<p><img src="https://wzq02.cf/images/for_hexo/iPhone_storage_full.jpg" srcset="/blog/img/loading.gif" lazyload alt="iPhone 存储空间不足的提示"></p>
<p>这看上去可能没什么不正常的，毕竟这里的手机存储就 32GB，你能指望它录制多久？但是与网络视频相比，比如在 B 站上，一个同样是一个半小时的 4K 视频，其需要的存储空间可能 5GB 都不到，而手机拍摄的视频就大得多。</p>
<p><img src="https://wzq02.cf/images/for_hexo/draw3.png" srcset="/blog/img/loading.gif" lazyload><br><img src="https://wzq02.cf/images/for_hexo/draw5.png" srcset="/blog/img/loading.gif" lazyload></p>
<p>这是为什么呢？我们知道，视频都是需要被压缩（编码）的，而视频网站一般也会对上传的视频进行二次压缩，这使得视频的文件体积不至于过大。</p>
<p>那么你用手机录制的视频就没有经过压缩吗？显然不是。如果视频真的不压缩，那么别说一个小时的 4K 视频了，一个 10 多分钟的 1080p 视频，就能吃满现在容量 128GB 的 手机存储。</p>
<p>之所以手机录制的视频体积更大，实际上是因为视频网站的编码服务器，和你手机上的视频编码模块上，使用的压缩算法不同。而手机使用的视频压缩算法较为简单，没有服务器上用的算法那么复杂，这使得手机难以把视频压缩的更小。</p>
<p>那么手机上编码视频时可以使用更复杂的压缩算法吗？理论上也可以，就是编码速度会下降很多。但是手机录制视频，要求编码器实时处理视频数据，也就要求编码的速度必须足够快，如果使用复杂的算法，会加大手机的功耗不说，因为手机本身性能较弱，此时无法实时处理视频数据，录制出来的视频还会出现严重的掉帧现象，这是谁都不能接受的。</p>
<p>相比之下，视频网站用的服务器，并不需要实时处理视频，而且服务器的算力也足够强大，可以使用更为复杂的算法，所以可以在保证视频画质的前提下，输出体积更小的视频。</p>
<p>这也是为什么前几年人们认为 PC 端显卡编码取代不了 CPU 编码，显卡编码虽然速度快，但同样的，受显卡本身具有的一些限制，显卡使用的编码算法不会特别复杂，在压缩比上也就拼不过 CPU 编码。</p>
<p>当然还有一点就是手机拍摄的视频，往往会有比较多的噪点和抖动，增加视频内容的复杂度，这本就会提高码率（数据速率）需求，而视频码率的上升会直接导致视频体积增加。这就是为什么手机拍摄的视频往往会更大。</p>
<p>可能有人要问了，那为什么网站的服务器不使用简单的压缩算法呢？这样虽然会使视频体积增大，但能减少运算量，减少服务器的耗电量，降低电费支出，同时还能缩短视频审核时长，不是一举两得？（现在 B 站的视频转码流程似乎被算进审核流程了）</p>
<p>是这样，但是网站每年向 CDN 支出的高昂的流量费用，与服务器的电费相比，根本不值一提。而使用复杂的算法编码，降低视频文件体积，对视频网站而言，可以大幅度减少网站每年要支付的流量费用。同时网站还要考虑到一些网络条件不太好的用户，为了给这些“小水管”用户提供高画质的视频，使用复杂的算法编码视频，是必须的。</p>
<h3 id="2-以前的-B-站是怎样处理用户上传的视频的"><a href="#2-以前的-B-站是怎样处理用户上传的视频的" class="headerlink" title="2. 以前的 B 站是怎样处理用户上传的视频的"></a>2. 以前的 B 站是怎样处理用户上传的视频的</h3><p>从这里开始我将只讨论 B 站的情况。</p>
<p>目前 B 站的规模已经颇为宏大。其在 10 年时间里，由一家 ACG 文化爱好者聚集地，变成了如今涵盖各大领域的大型 UGC 视频网站。B 站目前已经官方支持 4K 视频的上传和发放，为用户提供高画质的视频。能提供这样的服务，也是因为网站具有强大的视频编码服务器和大容量的视频存储服务器。</p>
<p>那么以前的 B 站是不是这样的呢？事实上，混 B 站比较久的老二次元们，都知道，以前（具体是指 2014 年以前）的 B 站，别说视频编码了，人家连存储视频的服务器都没有。</p>
<p>什么？没有视频服务器？那这个网站还算什么视频网站？给爷爪巴</p>
<p>的确，阿 B 以前确实不是提供视频服务的网站，B 站使用的视频源，都是其他真正的视频网站（如优酷、新浪、腾讯等）提供的。用户要在 B 站上传视频，还得先把视频传到别的视频网站，再转到 B 站，而 B 站本身只提供播放器、评论和弹幕功能（当时国内规模大点的网站中，只有 AB 两家网站有弹幕功能，B 要是没有弹幕功能的话，恐怕没人会愿意在 B 投稿了）</p>
<p><img src="https://wzq02.cf/images/for_hexo/draw8.7.png" srcset="/blog/img/loading.gif" lazyload></p>
<p>当时多数的 UP 主（uploader，视频上传者）都是选择新浪作为 B 站视频的视频来源。一方面，B 站对于新浪源的限制较为宽松，另一方面，当时新浪本身的审查机制也不严格，这使得用户可以上传一些内容比较刺♂激♂♂♂的视频。</p>
<p>但是新浪有这么一个问题，新浪的视频二次压缩机制过于激进，高清的视频不做特殊处理，上传到新浪，就会被新浪二次压缩，由于压缩机制的激进，视频一被新浪压缩就会变成渣画质。</p>
<p>不过这个问题也好解决，因为新浪有一个检测机制，如果视频平均码率低于 1000kbps，新浪就不会二次压缩上传的视频，直接使用用户上传的源视频。</p>
<p>只不过这里又有一个问题，高清的视频通常也需要足够高的码率，1000k 对于绝大多数 1080p60 规格的视频是根本不够的。如何让码率超过 1000kbps 的视频不被新浪二次压缩？</p>
<p>有人据此想出了一个“歪”点子，比如对于一个时长 2 分钟，规格为 1080p 60fps 的视频，其视频平均码率原本为 5000kbps，那么我在视频后面加一个长达 8 分钟，而码率几乎为 0 的黑屏，不就可以把视频平均码率降到 1000k 了吗？</p>
<p>这种被称为“后黑”的方法（也有人称其为“战渣浪”）很快就被广大 UP 主采用，mama再也不用担心我视频画质渣了（误）。这也是 B 站早期的一些视频正片后面会有长达数分钟的黑屏的原因。</p>
<h3 id="3-开始支持直传的-B-站"><a href="#3-开始支持直传的-B-站" class="headerlink" title="3. 开始支持直传的 B 站"></a>3. 开始支持直传的 B 站</h3><p>大概是在 2014 年的某一天，B 站突然开始提供直接上传视频的功能，只不过 B 站当时用的还不是自己的视频服务器，而是 乐视 提供的服务器。直到这个时候，UP 主们才可以不用为了上传个视频还要在几个网站间来回跑。随着直传功能的加入，“战渣浪”的时代也差不多要过去了。乐视的压缩机制不算激进，提供 720p 画质的二次压缩后的视频是没什么问题的（我那时还没入站，所以具体是什么样我也不清楚）。</p>
<p><img src="https://wzq02.cf/images/for_hexo/draw8.8.png" srcset="/blog/img/loading.gif" lazyload></p>
<p>然后到了 2015 年，B 站开始有了自己的视频编码和存储服务器。</p>
<p>相比于现在，当时 B 站的视频转码系统比较简陋，视频画质选项只有两档可选（流畅和原画），而通常原画画质的视频就是没有被二次压缩的，可以上到 1080p，而流畅画质则是 B 站二次压缩出来的渣画质。也就是说，用户要么看高清，要么看糊糊，没有中间选择，这对于一些设备不大先进，网络条件一般的用户来说，实在是不大友好。</p>
<p>好处是当时 B 站并不限制原画画质视频的帧速率和音频声道数，你甚至可以上传 120 帧&#x2F;秒 的视频（要是你电脑足够强，114514 帧每秒也行），而且你还可以上传 5.1 环绕立体声音频，并且上传到 B 站也是 5.1 声道。</p>
<h3 id="4-对直传功能的逐步“完善”-（直传-2-0）"><a href="#4-对直传功能的逐步“完善”-（直传-2-0）" class="headerlink" title="4. 对直传功能的逐步“完善” （直传 2.0）"></a>4. 对直传功能的逐步“完善” （直传 2.0）</h3><p>2016 年下半年，B 站增加了一档清晰度（高清），同时原有的”原画”改名为“超清”，所以就成了流畅、高清、和超清三档了（但是这个“高清”画质其实只有 1080 x 608 分辨率，连 720p 都不到，不过比起 480p 都能算高清的优酷还是靠谱点）。</p>
<p>然后是 2016 年 10 月份，B 站推出了在当时引起一片骂声，“臭名昭著”的大会员制度。</p>
<p>同时对于番剧，增加了一档清晰度，就是大会员专享的 “1080P” 清晰度。</p>
<p>emm…这就很离谱了。毕竟 B 站之前直传的“超清”画质就是能上到 1080p 的，现在倒是把“超清”降到 720p，然后把“1080p”变成大会员专享，说好了“大会员制度不会影响非付费用户的体验”的呢？</p>
<p>再就是 2017 年初，B 站 开始支持水印功能。</p>
<p>关于水印字体，B 站一开始用的是雅黑，大概是出于版权的考虑，于 2017 年 7 月改成了思源黑体。</p>
<p>此后，B 站开始对视频防二压做限制，要求视频的 H.264 level ≤ 4.1（通常 1080p60 的视频都会是 level 4.2），码率低于 1800kbps（早些年高于 1400k 就不让上传了，所以以前有人把“战渣浪”的那一套方法用过来，以上传高码率视频），而且不允许视频做“后黑”处理，不能开启水印功能。视频必须完全符合以上这些条件，才可能在“超清”画质不被二次压缩，不然就都会被二次压缩掉，并且帧率超过 30 的视频都会被降到 30 帧&#x2F;秒。</p>
<p>再就是到了 17 年年底，B 站视频清晰度增加到四档。（流畅、清晰、高清、超清）<br>（“1080p” 去哪了？“1080p” 是番剧专用的，这里讨论的是用户上传的视频画质，对于一般用户上传的视频，“超清”画质还是能上到 1080p 的）</p>
<p>在一系列的限制后，要在 B 站得到 1080p60 的视频就变得比较困难，用户在上传视频前，需要自己用特殊方法压缩一遍，压缩视频时，需要手动调教编码器的参数，才得以上传符合不二压要求的 1080p60 视频，直到…</p>
<h3 id="5-直传-3-0-时代的-B-站（从-2018-年初开始）"><a href="#5-直传-3-0-时代的-B-站（从-2018-年初开始）" class="headerlink" title="5. 直传 3.0 时代的 B 站（从 2018 年初开始）"></a>5. 直传 3.0 时代的 B 站（从 2018 年初开始）</h3><p>嗯，这就（自主规制）的离谱。又是一个以前就支持，结果现在便乘了大会员专享的功能<br>不过 B 站这次确实是进步了一点。从 2018 年初开始，B 站官方将支持的视频码率上调到 6000kbps，更高的视频码率，使得高清视频的画面细节得以保留，因压缩引发的画质下降不再像以前那么严重，这是好事。</p>
<p>对视频网站来说，视频码率的提高会增加流量费用，但将此作为吸引用户来 B 站观看&#x2F;投稿视频的手段，也不算亏。</p>
<p>顺便提下为什么 HFR（高帧率）通常都是指 60 fps（帧每秒），而不是其他数字，比如 50 帧&#x2F;秒。</p>
<p>这是因为考虑到目前大多数显示设备的刷新率都是 60 赫兹，而 60 帧&#x2F;秒 刚好与 60 赫兹 对应，可以呈现最佳的显示效果。</p>
<p>至于为什么是 60 赫兹呢，这个刷新率其实是由 VESA（视频电子标准协会）于 1991 年制定的，这个刷新率是按照美国的交流电频率，60hz，来规定的。这就是为什么现在视频这一块，一提到高帧率，一般都是指 60 帧&#x2F;秒。</p>
<p>回到正题。</p>
<p>到了 18 年 8 月份，B 站又打算升级视频转码系统。</p>
<p>原文章你们可以不看。简单来说，B 站要引入一项叫做 DASH 的技术，这项技术带来的直接影响就是，对于网络条件不佳的用户，观看视频时切换清晰度，可以无缝切换，不会像以前那样，每次切换清晰度都要卡几秒。B 站的“自动”清晰度选项，也是这个时候开始出现的。</p>
<p>坏消息是，因为要对齐 GOP（关键帧间隔），而 B 站认为视频上传者不大会调♂教这一块的编码参数，（其实是什么原因各位都清楚），干脆把非大会员画质全做二次压缩处理。这意味着从此以后，用户要观看 HFR 视频，只能充大会员了。</p>
<p>DASH 我*<strong>，你把多少观众的视觉体验，全</strong>毁了！！！（bushi</p>
<h3 id="6-H-265-x2F-HEVC-的引入"><a href="#6-H-265-x2F-HEVC-的引入" class="headerlink" title="6. H.265&#x2F;HEVC 的引入"></a>6. H.265&#x2F;HEVC 的引入</h3><p>从 2018 年 11 月开始，B 站开始在视频点播试行 H.265 视频。</p>
<p>那么这个 H.265（又称 HEVC）是什么东西呢？H.265 是 ITU-T VCEG 于 2013 年制定的新的视频编码标准，其使用了先进的技术，拥有更多的编码单位和帧间预测模式，相比于上一代编码格式，它可以使视频在同等画质下体积缩小到原来的一半……</p>
<p>简单来说，H.265 这样的视频编码格式，相当于一个法案，规定视频怎么被压缩，这样压缩出来的视频才能被播放器认出来。而相对于他的前辈，H.264（AVC），它能减小视频体积…</p>
<p><img src="https://wzq02.cf/images/for_hexo/draw9.png" srcset="/blog/img/loading.gif" lazyload alt="瞎画的，不过中国确实也有研发自己的视频编码格式，比如 AVS..."><br><img src="https://wzq02.cf/images/for_hexo/draw10.png" srcset="/blog/img/loading.gif" lazyload></p>
<p>不对！决定同画质下视频压缩比的不应该是编码器使用的算法吗，编码格式能决定什么？</p>
<p>是这样的，其实旧有的编码格式（如 H.264）是存在一些限制的，在这种限制下，编码器算法哪怕再复杂，视频的压缩比也会达到一个瓶颈，此时要进一步提高视频压缩比，就得更新视频编码格式了，H.265 也应运而生。</p>
<p>（其实现在 H.266 都已经要出来了，不过任何新事物的普及都是需要时间的，现在大多数视频网站用的还是 H.264…）</p>
<p>对于网站而言，更换新的视频编码格式，好处显而易见。前面我不是讲过，B 站需要为高码率的视频支付高昂的流量费用？如果使用 H.265 替代 H.264，则网站可以在提供同样画质的视频时，大幅降低视频码率，也就会降低网站的流量费，同时也使得那些网速慢的用户能流畅观看高画质视频。</p>
<p>问题就是，H.265 标准还没出来几年，H.265 格式的视频不是所有的设备都能认得出来的，而且这种视频因为在编码时往往会使用更为复杂的压缩算法，会增大客户端解码（播放）视频的运算量，也就会增加客户端设备的负载，对于低配置用户不友好。</p>
<p><img src="https://wzq02.cf/images/for_hexo/draw11.png" srcset="/blog/img/loading.gif" lazyload></p>
<p>所以截至本文发布时，多数用户在 B 站看到的仍然是 H.264 格式的视频。</p>
<p>大概就在前几天（2020 年 8 月 10 号左右），B 站开始支持网页端 H.265 视频播放了（以前是只有移动端），不过只有部分浏览器能完美支持<br>同时也是在 2018 年年底，用户可以在网页端上传体积 8GB 的视频了。（以前只支持 4GB，现在好像支持到 16GB 了）</p>
<p>关于编码器这块，我之前一直以为 B 站直接用的现有的视频编码器（如 x264，x265），直到后来我才知道，人家用的是 B 站自研的编码器，还是有点nb的…</p>
<h3 id="7-官宣-4K"><a href="#7-官宣-4K" class="headerlink" title="7. 官宣 4K"></a>7. 官宣 4K</h3><p>2019 年 6 月，B 站番剧开始支持 4K 画质，当然这个是大会员专享的。</p>
<p>↑ 其实 ​B 站这边早在“战渣浪”时期就有人尝试上传 4K 视频，纯粹是烧机用的，当时没几个电脑带的动 4K 视频（现在这个视频已经被二次压缩为 1080p）</p>
<p>只是这个功能一出来，就有人开始抱怨视频码率不够，之前提到的 6000kbps 对于 1080p 视频而言尚且够用，但分辨率上到 4K（或者说 2160p，对于比例 16：9 的视频而言这两者是一回事），6000k 就不够了，所以当时很多人就提意见，希望 B 站能拓宽码率限制…</p>
<p>到了 2020 年 5 月，B 站开始向用户公测 4K 视频上传。</p>
<p>6 月份，4K 视频全面铺开，任何用户（包括我这种“白嫖党”）都可以上传并在 B 站得到 4K 视频，同时 B 站开始支持 120 帧 视频，码率限制也如之前用户所提出来的那样，拓宽到了 20000kbps。</p>
<p>不过 1080p 视频并不支持 120 帧，而对于 4K 120 的视频，20000kbps 其实还是有些不够的…</p>
<h3 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h3><p>其实 B 站从一开始不支持直接上传视频，到如今可以无需上传者折腾直接上传高画质的视频，在提升用户体验的同时，很大程度上降低了 UP 主的投稿门槛。这也是目前 B 站能够“出圈”，吸引各大领域内容创作者来投稿的关键因素之一。</p>
<p>B 站的视频研发团队在上线各种新功能（比如 2019 年 上线的 互动视频 以及在 2020 上半年开始支持的 360° 全景视频），采用各种新技术的同时，也在不断改善客户端播放体验，忙着修复各种 bug。虽然我个人对于 B 站这样一个商业化的视频网站，在运营和审查制度等方面存在诸多意见，但在网站核心的视频领域这块，我还是比较赞赏视频研发团队时刻为用户着想的职业精神的。</p>
<p>写到这里也差不多了，这篇文字版我写了大概有几个小时吧。说实话我这次是第一次写这么长的文章orz</p>
<p>此后 wzqtechtips 系列我暂且以文字版形式发布，主要是第一期视频没什么人看，后面几期我就不想再做成视频了。至于会不会重启视频版，以后再说吧。</p>
<p>本文及附图均使用 CC0 1.0 协议发布。</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              

              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/blog/200827_wtt02/" title="【wzqtechtips#02】探究不同 Windows 版本对应用性能的影响">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">【wzqtechtips#02】探究不同 Windows 版本对应用性能的影响</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/blog/200729/" title="我为什么删稿 | Why did I delete my videos">
                        <span class="hidden-mobile">我为什么删稿 | Why did I delete my videos</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/blog/js/events.js" ></script>
<script  src="/blog/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/blog/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/blog/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/blog/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
